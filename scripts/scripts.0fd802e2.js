"use strict";angular.module("jsgameApp",["ngAnimate","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("jsgameApp").controller("MainCtrl",["$scope","$http","levels",function(a,b,c){a.levelsData=[],a.playing=c.playing,a.selectedLevel={name:"Level data",description:"<p>Test description</p>",type:"golf",data:{successed:["a1","b","c"],failed:["1","2","3"]}},c.get().then(function(b){c.data=b,a.levelsData=c.data}),a.loadLevel=function(b){a.playing=!0,a.selectedLevel=b}}]),angular.module("jsgameApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("jsgameApp").controller("GolfCtrl",["$scope","levels",function(a,b){a.successedResults=[],a.failedResults=[],a.playing=b.playing,a.getClass=function(b,c){return"undefined"==typeof a[c+"Results"][b]?"":"successed"===c?a[c+"Results"][b]?"success":"fail":a[c+"Results"][b]?"fail":"success"},a.nextLevel=function(c){a.successedResults=[],a.failedResults=[],a.regexp="",a.victory=!1;for(var d,e=c.id,f=a.levelsData.length,g=0;f>g;g++)if(a.levelsData[g].id===e){d=g+1;break}"undefined"!=typeof a.levelsData[d]?a.selectedLevel=a.levelsData[d]:(b.playing=!1,a.playing=!1)},a.regexp="",a.testRegexp=function(){var b=new RegExp(a.regexp);a.successedResults=a.selectedLevel.data.successed.map(function(c){return""!==a.regexp?b.test(c):!1}),a.failedResults=a.selectedLevel.data.failed.map(function(c){return""!==a.regexp?b.test(c):!0}),a.victory=a.successedResults.indexOf(!1)<0&&a.failedResults.indexOf(!0)<0}}]),angular.module("jsgameApp").service("levels",["$http",function(a){var b={data:[],get:function(){var b=a.get("data/levels.json").then(function(a){return a.data});return b},playing:!1};return b}]),angular.module("jsgameApp").directive("levelSelector",function(){return{templateUrl:"/views/levelSelector.html",restrict:"EA",link:function(a,b,c){function d(a){this.options={lineWidth:2,colorStroke:"green",colorFill:"#000",corners:6},angular.extend(this.options,a),this.options.canvas=this.options.element.find("canvas")[0],this.obj=this.options.canvas,this.ctx=this.options.canvas.getContext("2d"),this.build=function(){this.ctx.beginPath();var a=this.obj.width/2-5,b=this.obj.width/2,c=this.obj.width/2;this.ctx.moveTo(c,b);for(var d=360/this.options.corners,e=0,f=[],g=0;g<this.options.corners;g++){var h=c+Math.round(a*Math.cos(e*Math.PI/180)),i=b-Math.round(a*Math.sin(e*Math.PI/180));f.push([h,i]),0===g?this.ctx.moveTo(f[g][0],f[g][1]):this.ctx.lineTo(f[g][0],f[g][1]),e+=d}this.ctx.lineTo(f[0][0],f[0][1]),this.ctx.closePath(),this.ctx.lineWidth=this.options.lineWidth,this.ctx.strokeStyle=this.options.colorStroke,this.ctx.fillStyle=this.options.colorFill,this.ctx.fill(),this.ctx.stroke()}}var e={element:b,colorStroke:c.strokeStyle,colorFill:c.fillStyle,corners:a.$eval(c.corners),lineWidth:c.lineWidth};console.log(e);var f=new d(e);f.build()}}}),angular.module("jsgameApp").controller("CrosserCtrl",["$scope","levels",function(a,b){a.playing=b.playing,a.victory=!1,a.input="",a.passed=[],a.nextLevel=function(c){a.successedResults=[],a.failedResults=[],a.regexp="",a.victory=!1;for(var d,e=c.id,f=a.levelsData.length,g=0;f>g;g++)if(a.levelsData[g].id===e){d=g+1;break}"undefined"!=typeof a.levelsData[d]?a.selectedLevel=a.levelsData[d]:(b.playing=!1,a.playing=!1)},a.getClass=function(b){return 0===a.passed.length?"":a.passed[b]?"success":"fail"},a.testInput=function(){var b=a.selectedLevel.data.regexps,c=b.map(function(b){var c=new RegExp(b);return""!==a.input?c.test(a.input):!1});a.passed=c,~c.indexOf(!1)||(a.victory=!0)}}]);